query getTrovesBelow($first: Int!, $userCollateralRatioKey: BigInt) {
  troves(
    orderDirection: desc
    orderBy: collateralRatioSortKey
    first: $first
    # collateralRatioSortKey_gt will return troves with a collateral ratio lower than the user's
    # a high collateralRatioSortKey means a low collateral ratio
    where: { status: open, collateralRatioSortKey_gt: $userCollateralRatioKey }
  ) {
    changes(
      where: { troveOperation: openTrove }
      orderBy: sequenceNumber
      orderDirection: desc
    ) {
      id
      sequenceNumber
      transaction {
        id
        sequenceNumber
      }
      trove {
        id
        collateralRatioSortKey
        collateral
        debt
        status
      }
    }
  }
}
